---
layout: default
---
<h1>Troy ounce converter</h1>
<p>
    Ounce :<br/>
    <input type="number" id="field_ounce" oninput="ounce_changed()"><br/>
    Troy ounce :<br/>
    <input type="number" id="field_troy" oninput="troy_changed()"><br/>
    Gram :<br/>
    <input type="number" id="field_gram" oninput="gram_changed()"><br/>
</p>

<script>
var image = "assets/background_" + Math.floor(Math.random() * 3) + ".png"
document.getElementsByTagName("body")[0].style.backgroundImage = "url('"+ image +"')";

var factor_ounce_to_gram  = 28.3495231;
var factor_troy_to_gram   = 31.1034768;

function ounce_changed() {
    var field_ounce = document.getElementById("field_ounce");
    var field_gram = document.getElementById("field_gram");
    var field_troy = document.getElementById("field_troy");

    var ounce = field_ounce.value;
    var gram = ounce * factor_ounce_to_gram;
    var troy = gram / factor_troy_to_gram;

    field_gram.value = round_to_three(gram);
    field_troy.value = round_to_three(troy);
}

function gram_changed() {
    var field_ounce = document.getElementById("field_ounce");
    var field_gram = document.getElementById("field_gram");
    var field_troy = document.getElementById("field_troy");

    var gram = field_gram.value;
    var ounce = gram / factor_ounce_to_gram;
    var troy = gram / factor_troy_to_gram;

    field_ounce.value = round_to_three(ounce);
    field_troy.value = round_to_three(troy);
}

function troy_changed() {
    var field_ounce = document.getElementById("field_ounce");
    var field_gram = document.getElementById("field_gram");
    var field_troy = document.getElementById("field_troy");

    var troy = field_troy.value;
    var gram = troy * factor_troy_to_gram;
    var ounce = gram / factor_ounce_to_gram;

    field_gram.value = round_to_three(gram);
    field_ounce.value = round_to_three(ounce);
}

function round_to_three(num) {
    return +(Math.round(num + "e+3")  + "e-3");
}

field_ounce.value = 1;
ounce_changed();
</script>
